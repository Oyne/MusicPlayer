@page "/album/{Id:guid}"

<div class="main-area">
    <TrackList TrackCollection="Album"></TrackList>
    <ReleasePublisher ReleaseDate="@Album?.ReleaseDate"></ReleasePublisher>
    <ArtistAlbums AlbumId="@Album?.Id"></ArtistAlbums>
</div>


@code {
    [Parameter]
    public Guid Id { get; set; }

    public AlbumModel? Album { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await InitializePlaylistAsync();
    }

    protected override async Task OnParametersSetAsync()
    {
        await InitializePlaylistAsync();
    }

    private async Task InitializePlaylistAsync()
    {
        using (var db = new PlayerContext())
        {
            Album = await db.Albums.FirstOrDefaultAsync(a => a.Id == Id);
        }
    }
}